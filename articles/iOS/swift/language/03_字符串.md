# äºŒã€å­—ç¬¦ä¸²

> Swift çš„ `String` ç±»å‹ä¸ Foundation `NSString` ç±»è¿›è¡Œäº†æ— ç¼æ¡¥æ¥ã€‚Foundation è¿˜å¯¹ `String` è¿›è¡Œæ‰©å±•ä½¿å…¶å¯ä»¥è®¿é—® `NSString` ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€è°ƒç”¨é‚£äº› `NSString` çš„æ–¹æ³•ï¼Œä½ æ— éœ€è¿›è¡Œä»»ä½•ç±»å‹è½¬æ¢ã€‚
>
> æ›´å¤šå…³äºåœ¨ Foundation å’Œ Cocoa ä¸­ä½¿ç”¨ `String` çš„ä¿¡æ¯è¯·æŸ¥çœ‹ [*Bridging Between String and NSString*](https://developer.apple.com/documentation/swift/string#2919514)ã€‚

## 1 å¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡

```swift
let quotation = """
The White Rabbit put on his spectacles.  "Where shall I begin,
please your Majesty?" he asked.

"Begin at the beginning," the King said gravely, "and go on
till you come to the end; then stop."
"""
```

å¦‚æœä½ æƒ³æ¢è¡Œï¼Œä»¥ä¾¿åŠ å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œä½†æ˜¯ä½ åˆä¸æƒ³åœ¨ä½ çš„å¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡ä¸­å‡ºç°æ¢è¡Œç¬¦çš„è¯ï¼Œä½ å¯ä»¥ç”¨åœ¨è¡Œå°¾å†™ä¸€ä¸ªåæ–œæ ï¼ˆ`\`ï¼‰ä½œä¸ºç»­è¡Œç¬¦

```swift
let softWrappedQuotation = """
The White Rabbit put on his spectacles.  "Where shall I begin, \
please your Majesty?" he asked.

"Begin at the beginning," the King said gravely, "and go on \
till you come to the end; then stop."
"""
```

ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡èƒ½å¤Ÿç¼©è¿›æ¥åŒ¹é…å‘¨å›´çš„ä»£ç ã€‚å…³é—­å¼•å·ï¼ˆ`"""`ï¼‰ä¹‹å‰çš„ç©ºç™½å­—ç¬¦ä¸²å‘Šè¯‰ Swift ç¼–è¯‘å™¨å…¶ä»–å„è¡Œå¤šå°‘ç©ºç™½å­—ç¬¦ä¸²éœ€è¦å¿½ç•¥ã€‚ç„¶è€Œï¼Œå¦‚æœä½ åœ¨æŸè¡Œçš„å‰é¢å†™çš„ç©ºç™½å­—ç¬¦ä¸²è¶…å‡ºäº†å…³é—­å¼•å·ï¼ˆ`"""`ï¼‰ä¹‹å‰çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œåˆ™è¶…å‡ºéƒ¨åˆ†å°†è¢«åŒ…å«åœ¨å¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡ä¸­ã€‚

![](source/image/03_1.png)

## 2 æ‰©å±•å­—ç¬¦ä¸²åˆ†éš”ç¬¦

å¯ä»¥å°†å­—ç¬¦ä¸²æ–‡å­—æ”¾åœ¨æ‰©å±•åˆ†éš”ç¬¦ä¸­ï¼Œè¿™æ ·å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦å°†ä¼šè¢«ç›´æ¥åŒ…å«è€Œéè½¬ä¹‰åçš„æ•ˆæœã€‚

å°†å­—ç¬¦ä¸²æ”¾åœ¨å¼•å·ï¼ˆ`"`ï¼‰ä¸­å¹¶ç”¨æ•°å­—ç¬¦å·ï¼ˆ`#`ï¼‰æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œæ‰“å°å­—ç¬¦ä¸²æ–‡å­— `#"Line 1 \nLine 2"#` ä¼šæ‰“å°æ¢è¡Œç¬¦è½¬ä¹‰åºåˆ—ï¼ˆ`\n`ï¼‰è€Œä¸æ˜¯ç»™æ–‡å­—æ¢è¡Œã€‚

å¦‚æœéœ€è¦å­—ç¬¦ä¸²æ–‡å­—ä¸­å­—ç¬¦çš„ç‰¹æ®Šæ•ˆæœï¼Œè¯·åŒ¹é…è½¬ä¹‰å­—ç¬¦ï¼ˆ`\`ï¼‰åé¢æ·»åŠ ä¸èµ·å§‹ä½ç½®ä¸ªæ•°ç›¸åŒ¹é…çš„ `#` ç¬¦ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„å­—ç¬¦ä¸²æ˜¯ `#"Line 1 \nLine 2"#` å¹¶ä¸”æ‚¨æƒ³è¦æ¢è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `#"Line 1 \#nLine 2"#` æ¥ä»£æ›¿ã€‚ åŒæ ·ï¼Œ`###"Line1 \###nLine2"###` ä¹Ÿå¯ä»¥å®ç°æ¢è¡Œæ•ˆæœã€‚

æ‰©å±•åˆ†éš”ç¬¦åˆ›å»ºçš„å­—ç¬¦ä¸²æ–‡å­—ä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ‰©å±•åˆ†éš”ç¬¦åœ¨å¤šè¡Œå­—ç¬¦ä¸²ä¸­åŒ…å«æ–‡æœ¬ `"""`ï¼Œè¦†ç›–åŸæœ‰çš„ç»“æŸæ–‡å­—çš„é»˜è®¤è¡Œä¸ºã€‚ä¾‹å¦‚ï¼š

```swift
let threeMoreDoubleQuotationMarks = #"""
Here are three more double quotes: """
"""#
```

## 3 å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹

åœ¨å®é™…ç¼–è¯‘æ—¶ï¼ŒSwift ç¼–è¯‘å™¨ä¼šä¼˜åŒ–å­—ç¬¦ä¸²çš„ä½¿ç”¨ï¼Œä½¿å®é™…çš„å¤åˆ¶åªå‘ç”Ÿåœ¨ç»å¯¹å¿…è¦çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ä½ å°†å­—ç¬¦ä¸²ä½œä¸ºå€¼ç±»å‹çš„åŒæ—¶å¯ä»¥è·å¾—æé«˜çš„æ€§èƒ½ã€‚

## 4 Character

å•ä¸ªå­—ç¬¦

```swift
let exclamationMark: Character = "!"
```

å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªå€¼ç±»å‹ä¸º `Character` çš„æ•°ç»„ä½œä¸ºè‡ªå˜é‡æ¥åˆå§‹åŒ–ï¼š

```swift
let catCharacters: [Character] = ["C", "a", "t", "!", "ğŸ±"]
let catString = String(catCharacters)
print(catString)
// æ‰“å°è¾“å‡ºï¼šâ€œCat!ğŸ±â€
```

## 5 è®¡ç®—å­—ç¬¦æ•°é‡

å¦‚æœæƒ³è¦è·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ `Character` å€¼çš„æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨ `count` å±æ€§ï¼š

```swift
let unusualMenagerie = "Koala ğŸ¨, Snail ğŸŒ, Penguin ğŸ§, Dromedary ğŸª"
print("unusualMenagerie has \(unusualMenagerie.count) characters")
// æ‰“å°è¾“å‡ºâ€œunusualMenagerie has 40 charactersâ€
```

æ³¨æ„åœ¨ Swift ä¸­ï¼Œä½¿ç”¨å¯æ‹“å±•çš„å­—ç¬¦ç¾¤é›†ä½œä¸º `Character` å€¼æ¥è¿æ¥æˆ–æ”¹å˜å­—ç¬¦ä¸²æ—¶ï¼Œå¹¶ä¸ä¸€å®šä¼šæ›´æ”¹å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚

> æ³¨æ„
>
> å¯æ‰©å±•çš„å­—å½¢ç¾¤å¯ä»¥ç”±å¤šä¸ª Unicode æ ‡é‡ç»„æˆã€‚è¿™æ„å‘³ç€ä¸åŒçš„å­—ç¬¦ä»¥åŠç›¸åŒå­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹å¼å¯èƒ½éœ€è¦ä¸åŒæ•°é‡çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨ã€‚æ‰€ä»¥ Swift ä¸­çš„å­—ç¬¦åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¹¶ä¸ä¸€å®šå ç”¨ç›¸åŒçš„å†…å­˜ç©ºé—´æ•°é‡ã€‚å› æ­¤åœ¨æ²¡æœ‰è·å–å­—ç¬¦ä¸²çš„å¯æ‰©å±•çš„å­—ç¬¦ç¾¤çš„èŒƒå›´æ—¶å€™ï¼Œå°±ä¸èƒ½è®¡ç®—å‡ºå­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚å¦‚æœä½ æ­£åœ¨å¤„ç†ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œéœ€è¦æ³¨æ„ `count` å±æ€§å¿…é¡»éå†å…¨éƒ¨çš„ Unicode æ ‡é‡ï¼Œæ¥ç¡®å®šå­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚
>
> å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯é€šè¿‡ `count` å±æ€§è¿”å›çš„å­—ç¬¦æ•°é‡å¹¶ä¸æ€»æ˜¯ä¸åŒ…å«ç›¸åŒå­—ç¬¦çš„ `NSString` çš„ `length` å±æ€§ç›¸åŒã€‚`NSString` çš„ `length` å±æ€§æ˜¯åˆ©ç”¨ UTF-16 è¡¨ç¤ºçš„åå…­ä½ä»£ç å•å…ƒæ•°å­—ï¼Œè€Œä¸æ˜¯ Unicode å¯æ‰©å±•çš„å­—ç¬¦ç¾¤é›†ã€‚

## 6 å­—ç¬¦ä¸²ä¸‹æ ‡è¯­æ³•

æ¯ä¸€ä¸ª `String` å€¼éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç´¢å¼•ï¼ˆ*index*ï¼‰ç±»å‹ï¼Œ`String.Index`ï¼Œå®ƒå¯¹åº”ç€å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ª `Character` çš„ä½ç½®ã€‚

ä¸åŒçš„å­—ç¬¦å¯èƒ½ä¼šå ç”¨ä¸åŒæ•°é‡çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥è¦çŸ¥é“ `Character` çš„ç¡®å®šä½ç½®ï¼Œå°±å¿…é¡»ä» `String` å¼€å¤´éå†æ¯ä¸€ä¸ª Unicode æ ‡é‡ç›´åˆ°ç»“å°¾ã€‚å› æ­¤ï¼ŒSwift çš„å­—ç¬¦ä¸²ä¸èƒ½ç”¨æ•´æ•°ï¼ˆintegerï¼‰åšç´¢å¼•ã€‚

ä½¿ç”¨ `startIndex` å±æ€§å¯ä»¥è·å–ä¸€ä¸ª `String` çš„ç¬¬ä¸€ä¸ª `Character` çš„ç´¢å¼•ã€‚ä½¿ç”¨ `endIndex` å±æ€§å¯ä»¥è·å–æœ€åä¸€ä¸ª `Character` çš„åä¸€ä¸ªä½ç½®çš„ç´¢å¼•ã€‚å› æ­¤ï¼Œ`endIndex` å±æ€§ä¸èƒ½ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æœ‰æ•ˆä¸‹æ ‡ã€‚å¦‚æœ `String` æ˜¯ç©ºä¸²ï¼Œ`startIndex` å’Œ `endIndex` æ˜¯ç›¸ç­‰çš„ã€‚

```swift
let greeting = "Guten Tag!"
greeting[greeting.startIndex]
// G
greeting[greeting.index(before: greeting.endIndex)]
// !
greeting[greeting.index(after: greeting.startIndex)]
// u
let index = greeting.index(greeting.startIndex, offsetBy: 7)
greeting[index]
// a
```

ä½¿ç”¨ `indices` å±æ€§ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«å…¨éƒ¨ç´¢å¼•çš„èŒƒå›´ï¼ˆ`Range`ï¼‰ï¼Œç”¨æ¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è®¿é—®å•ä¸ªå­—ç¬¦ã€‚

```swift
for index in greeting.indices {
   print("\(greeting[index]) ", terminator: "")
}
// æ‰“å°è¾“å‡ºâ€œG u t e n   T a g ! â€
```

## 7 æ’å…¥å’Œåˆ é™¤

è°ƒç”¨ `insert(_:at:)` æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œè°ƒç”¨ `insert(contentsOf:at:)` æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•æ’å…¥ä¸€ä¸ªæ®µå­—ç¬¦ä¸²ã€‚

```swift
var welcome = "hello"
welcome.insert("!", at: welcome.endIndex)
// welcome å˜é‡ç°åœ¨ç­‰äº "hello!"

welcome.insert(contentsOf:" there", at: welcome.index(before: welcome.endIndex))
// welcome å˜é‡ç°åœ¨ç­‰äº "hello there!"
```

è°ƒç”¨ `remove(at:)` æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œè°ƒç”¨ `removeSubrange(_:)` æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•åˆ é™¤ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚

```swift
welcome.remove(at: welcome.index(before: welcome.endIndex))
// welcome ç°åœ¨ç­‰äº "hello there"

let range = welcome.index(welcome.endIndex, offsetBy: -6)..<welcome.endIndex
welcome.removeSubrange(range)
// welcome ç°åœ¨ç­‰äº "hello"
```

